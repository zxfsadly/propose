var ue=Object.defineProperty;var fe=e=>ue(e,"__esModule",{value:!0});var be=(e,t)=>{fe(e);for(var u in t)ue(e,u,{get:t[u],enumerable:!0})};be(exports,{default:()=>Se,getStroke:()=>A,getStrokeOutlinePoints:()=>$,getStrokePoints:()=>B});function W(e,t,u,h=b=>b){return e*h(.5-t*(.5-u))}function se(e){return[-e[0],-e[1]]}function l(e,t){return[e[0]+t[0],e[1]+t[1]]}function a(e,t){return[e[0]-t[0],e[1]-t[1]]}function f(e,t){return[e[0]*t,e[1]*t]}function ge(e,t){return[e[0]/t,e[1]/t]}function L(e){return[e[1],-e[0]]}function ie(e,t){return e[0]*t[0]+e[1]*t[1]}function ce(e,t){return e[0]===t[0]&&e[1]===t[1]}function he(e){return Math.hypot(e[0],e[1])}function de(e){return e[0]*e[0]+e[1]*e[1]}function Y(e,t){return de(a(e,t))}function G(e){return ge(e,he(e))}function me(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function T(e,t,u){let h=Math.sin(u),b=Math.cos(u),v=e[0]-t[0],n=e[1]-t[1],g=v*b-n*h,E=v*h+n*b;return[g+t[0],E+t[1]]}function V(e,t,u){return l(e,f(a(t,e),u))}function Z(e,t,u){return l(e,f(t,u))}var{min:_,PI:xe}=Math,pe=.275,j=xe+1e-4;function $(e,t={}){let{size:u=16,smoothing:h=.5,thinning:b=.5,simulatePressure:v=!0,easing:n=r=>r,start:g={},end:E={},last:z=!1}=t,{cap:d=!0,taper:x=0,easing:q=r=>r*(2-r)}=g,{cap:m=!0,taper:c=0,easing:M=r=>--r*r*r+1}=E;if(e.length===0||u<=0)return[];let H=e[e.length-1].runningLength,ee=Math.pow(u*h,2),D=[],R=[],N=e.slice(0,10).reduce((r,i)=>{let o=i.pressure;if(v){let s=_(1,i.distance/u),J=_(1,1-s);o=_(1,r+(J-r)*(s*pe))}return(r+o)/2},e[0].pressure),p=W(u,b,e[e.length-1].pressure,n),U,te=e[0].vector,I=e[0].point,C=I,y=I,O=C;for(let r=0;r<e.length;r++){let{pressure:i}=e[r],{point:o,vector:s,distance:J,runningLength:K}=e[r];if(r<e.length-1&&H-K<3)continue;if(b){if(v){let P=_(1,J/u),Q=_(1,1-P);i=_(1,N+(Q-N)*(P*pe))}p=W(u,b,i,n)}else p=u/2;U===void 0&&(U=p);let ae=K<x?q(K/x):1,le=H-K<c?M((H-K)/c):1;if(p=Math.max(.01,p*Math.min(ae,le)),r===e.length-1){let P=f(L(s),p);D.push(a(o,P)),R.push(l(o,P));continue}let re=e[r+1].vector,ne=ie(s,re);if(ne<0){let P=f(L(te),p);for(let Q=1/13,w=0;w<=1;w+=Q)y=T(a(o,P),o,j*w),D.push(y),O=T(l(o,P),o,j*-w),R.push(O);I=y,C=O;continue}let oe=f(L(V(re,s,ne)),p);y=a(o,oe),(r<=1||Y(I,y)>ee)&&(D.push(y),I=y),O=l(o,oe),(r<=1||Y(C,O)>ee)&&(R.push(O),C=O),N=i,te=s}let S=e[0].point.slice(0,2),k=e.length>1?e[e.length-1].point.slice(0,2):l(e[0].point,[1,1]),X=[],F=[];if(e.length===1){if(!(x||c)||z){let r=Z(S,G(L(a(S,k))),-(U||p)),i=[];for(let o=1/13,s=o;s<=1;s+=o)i.push(T(r,S,j*2*s));return i}}else{if(!(x||c&&e.length===1))if(d)for(let i=1/13,o=i;o<=1;o+=i){let s=T(R[0],S,j*o);X.push(s)}else{let i=a(D[0],R[0]),o=f(i,.5),s=f(i,.51);X.push(a(S,o),a(S,s),l(S,s),l(S,o))}let r=L(se(e[e.length-1].vector));if(c||x&&e.length===1)F.push(k);else if(m){let i=Z(k,r,p);for(let o=1/29,s=o;s<1;s+=o)F.push(T(i,k,j*3*s))}else F.push(l(k,f(r,p)),l(k,f(r,p*.99)),a(k,f(r,p*.99)),a(k,f(r,p)))}return D.concat(F,R.reverse(),X)}function B(e,t={}){var q;let{streamline:u=.5,size:h=16,last:b=!1}=t;if(e.length===0)return[];let v=.15+(1-u)*.85,n=Array.isArray(e[0])?e:e.map(({x:m,y:c,pressure:M=.5})=>[m,c,M]);if(n.length===2){let m=n[1];n=n.slice(0,-1);for(let c=1;c<5;c++)n.push(V(n[0],m,c/4))}n.length===1&&(n=[...n,[...l(n[0],[1,1]),...n[0].slice(2)]]);let g=[{point:[n[0][0],n[0][1]],pressure:n[0][2]>=0?n[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],E=!1,z=0,d=g[0],x=n.length-1;for(let m=1;m<n.length;m++){let c=b&&m===x?n[m].slice(0,2):V(d.point,n[m],v);if(ce(d.point,c))continue;let M=me(c,d.point);if(z+=M,m<x&&!E){if(z<h)continue;E=!0}d={point:c,pressure:n[m][2]>=0?n[m][2]:.5,vector:G(a(d.point,c)),distance:M,runningLength:z},g.push(d)}return g[0].vector=((q=g[1])==null?void 0:q.vector)||[0,0],g}function A(e,t={}){return $(B(e,t),t)}var Se=A;
