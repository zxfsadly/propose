import { Awaitable } from '@antfu/utils';
import { IThemeRegistration, ILanguageRegistration, Highlighter } from 'shiki';
import * as monaco from 'monaco-editor';
import { App } from 'vue';
import { Router } from 'vue-router';

interface SlideInfo {
    index: number;
    start: number;
    end: number;
    raw: string;
    content: string;
    note?: string;
    frontmatter: Record<string, any>;
    title?: string;
}
interface SlideInfoExtended extends SlideInfo {
    notesHTML: string;
}
interface SlidevConfig {
    title: string;
    /**
     * @defult 'default'
     */
    theme: string;
    /**
     * @defult true
     */
    remoteAssets: boolean | 'dev' | 'build';
    /**
     * @defult 'dev'
     */
    monaco: boolean | 'dev' | 'build';
    /**
     * Show a download button in the SPA build,
     * could also be a link to custom pdf
     *
     * @default true
     */
    download: boolean | string;
    /**
     * Information shows on the built SPA
     * Can be a markdown string
     *
     * @default true
     */
    info: string | boolean;
    /**
     * @default prism
     */
    highlighter: 'prism' | 'shiki';
}
interface SlidevFeatureFlags {
    katex: boolean;
    monaco: boolean;
    tweet: boolean;
}
interface SlidevMarkdown {
    filepath?: string;
    slides: SlideInfo[];
    raw: string;
    config: SlidevConfig;
    features: SlidevFeatureFlags;
    headmatter: Record<string, unknown>;
}

interface AppContext {
    app: App;
    router: Router;
}
interface ShikiDarkModeThemes {
    dark: IThemeRegistration;
    light: IThemeRegistration;
}
interface ShikiOptions {
    theme?: IThemeRegistration | ShikiDarkModeThemes;
    langs?: ILanguageRegistration[];
    highlighter?: Highlighter;
}
declare type ShikiSetup = () => Awaitable<ShikiOptions | undefined>;
declare type MonacoSetup = (m: typeof monaco) => Awaitable<void>;
declare type AppSetup = (context: AppContext) => Awaitable<void>;
declare function defineShikiSetup(fn: ShikiSetup): ShikiSetup;
declare function defineMonacoSetup(fn: MonacoSetup): MonacoSetup;
declare function defineAppSetup(fn: AppSetup): AppSetup;

export { AppContext, AppSetup, MonacoSetup, ShikiDarkModeThemes, ShikiOptions, ShikiSetup, SlideInfo, SlideInfoExtended, SlidevConfig, SlidevFeatureFlags, SlidevMarkdown, defineAppSetup, defineMonacoSetup, defineShikiSetup };
